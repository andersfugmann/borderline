Optimize identical chains. 
Require one rule for each zone definition.
Move implementation to .ml and types to .mli







